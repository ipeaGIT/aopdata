<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to aopdata • aopdata</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to aopdata">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">aopdata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/access_inequality.html">Analyzing inequality in access to opportunities</a></li>
    <li><a class="dropdown-item" href="../articles/access_maps.html">Mapping urban accessibility</a></li>
    <li><a class="dropdown-item" href="../articles/data_dic_en.html">Data dictionary [EN]</a></li>
    <li><a class="dropdown-item" href="../articles/data_dic_pt.html">Dicionário de dados [PT]</a></li>
    <li><a class="dropdown-item" href="../articles/intro_to_aopdata.html">Introduction to aopdata</a></li>
    <li><a class="dropdown-item" href="../articles/landuse_maps.html">Mapping land use data</a></li>
    <li><a class="dropdown-item" href="../articles/population_maps.html">Mapping population data</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ipeaGIT/aopdata/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to aopdata</h1>
            
            <h4 data-toc-skip class="date">2025-01-29</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ipeaGIT/aopdata/blob/main/vignettes/intro_to_aopdata.Rmd" class="external-link"><code>vignettes/intro_to_aopdata.Rmd</code></a></small>
      <div class="d-none name"><code>intro_to_aopdata.Rmd</code></div>
    </div>

    
    
<p>This vignette introduces the <strong><code>aopdata</code></strong>
package.</p>
<p><strong><code>aopdata</code></strong> is an R package to download
data from the <a href="https://www.ipea.gov.br/acessooportunidades/en/" class="external-link">Access to
Opportunities Project (AOP)</a>. The AOP is a research initiative led by
the Institute for Applied Economic Research (Ipea) with the aim to study
transport access to opportunities in Brazilian cities.</p>
<p>The <strong><code>aopdata</code></strong> package brings annual
estimates of access to employment, health, education and social
protection services by transport mode at a fine spatial resolution for
the 20 largest cities in Brazil. The package also brings data on the
spatial distribution of population by sex, race, income and age, as well
as the distribution of jobs, schools, healthcare facilities and social
assistance reference centers.</p>
<p>Data for 2017, 2018 and 2019 are already available, and cover
accessibility estimates by car and active transport modes (walking and
cycling) for the 20 largest cities in the country, and by public
transport for over 9 major cities. For more information on the <a href="https://www.ipea.gov.br/acessooportunidades/en/" class="external-link">AOP
website</a>.</p>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>You can install <code>aopdata</code> from CRAN, or the development
version from GitHub.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># CRAN</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"aopdata"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># dev version from github</span></span>
<span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/remove.packages.html" class="external-link">remove.packages</a></span><span class="op">(</span><span class="st">'aopdata'</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"ipeaGIT/aopdata"</span>, subdir <span class="op">=</span> <span class="st">"r-package"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="overview-of-the-package">Overview of the package<a class="anchor" aria-label="anchor" href="#overview-of-the-package"></a>
</h3>
<p>The <strong>aopdata</strong> package includes five core
functions.</p>
<ul>
<li>
<code><a href="../reference/read_population.html">read_population()</a></code> - Download population data</li>
<li>
<code><a href="../reference/read_landuse.html">read_landuse()</a></code> - Download landuse data</li>
<li>
<code><a href="../reference/read_access.html">read_access()</a></code> - Download accessibility estimates</li>
<li>
<code><a href="../reference/aopdata_dictionary.html">aopdata_dictionary()</a></code> - Opens aopdata data dictionary on
a web browser</li>
<li>
<code><a href="../reference/read_grid.html">read_grid()</a></code> - Download the H3 hexagonal spatial
grid</li>
</ul>
<p>For a detailed explanations of these functions, check the
<strong>vignettes</strong>: - <a href="access_maps.html">Mapping urban
accessibility</a> - <a href="population_maps.html">Mapping population
data</a> - <a href="landuse_maps.html">Mapping land use data</a> - <a href="access_inequality.html">Analyzing inequality in access to
opportunities</a></p>
</div>
<div class="section level3">
<h3 id="basic-usage">Basic Usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h3>
<p>First, you need to load the package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ipeagit.github.io/aopdata/">aopdata</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="data-dictionary">Data dictionary<a class="anchor" aria-label="anchor" href="#data-dictionary"></a>
</h4>
<p>The dictionary of data columns is presented in the documentation of
each function. However, you can also open the data dictionary on a web
browser by running:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># for English</span></span>
<span><span class="fu"><a href="../reference/aopdata_dictionary.html">aopdata_dictionary</a></span><span class="op">(</span>lang <span class="op">=</span> <span class="st">'en'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># for Portuguese</span></span>
<span><span class="fu"><a href="../reference/aopdata_dictionary.html">aopdata_dictionary</a></span><span class="op">(</span>lang <span class="op">=</span> <span class="st">'pt'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="accessibility-estimates">Accessibility estimates<a class="anchor" aria-label="anchor" href="#accessibility-estimates"></a>
</h4>
<p>The <code><a href="../reference/read_access.html">read_access()</a></code> function downloads accessibility
estimates for a given <code>city</code>, <code>mode</code> and
<code>year</code>. For the sake of convenience, this function will also
automatically download the population and land use data for the cities
selected. Note that accessibility estimates are available for peak and
off-peak periods for <code>public_transport</code>and <code>car</code>
modes.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Download accessibility, population and land use data</span></span>
<span><span class="va">cur</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_access.html">read_access</a></span><span class="op">(</span></span>
<span>  city <span class="op">=</span> <span class="st">'Curitiba'</span>, </span>
<span>  mode <span class="op">=</span> <span class="st">'public_transport'</span>, </span>
<span>  peak <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  year <span class="op">=</span> <span class="fl">2019</span>,</span>
<span>  showProgress <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>You many also set the parameter <code>geometry = TRUE</code> so that
functions return a spatial <code>sf</code> object with the geometries of
the H3 spatial grid.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Download accessibility, population and land use data</span></span>
<span><span class="va">cur</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_access.html">read_access</a></span><span class="op">(</span></span>
<span>  city <span class="op">=</span> <span class="st">'Curitiba'</span>, </span>
<span>  mode <span class="op">=</span> <span class="st">'public_transport'</span>, </span>
<span>  peak <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  year <span class="op">=</span> <span class="fl">2019</span>,</span>
<span>  geometry <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="population-and-land-use-data">Population and land use data<a class="anchor" aria-label="anchor" href="#population-and-land-use-data"></a>
</h4>
<p>In case you are only interested in using the population and land use
data generated by the Access to Opportunities Project, you can download
these data sets separately. Please note that the population available
comes from the latest Brazilian 2010 census, while land use data cna be
downloaded for 2017, 2018 or 2019.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Land use data</span></span>
<span><span class="va">lnu_for</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_landuse.html">read_landuse</a></span><span class="op">(</span></span>
<span>  city <span class="op">=</span> <span class="st">'Fortaleza'</span>, </span>
<span>  year <span class="op">=</span> <span class="fl">2019</span>,</span>
<span>  geometry <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  showProgress <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Population data</span></span>
<span><span class="va">pop_for</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_population.html">read_population</a></span><span class="op">(</span></span>
<span>  city <span class="op">=</span> <span class="st">'Fortaleza'</span>, </span>
<span>  year <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>  geometry <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  showProgress <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="read-only-spatial-grid-data">Read only spatial grid data<a class="anchor" aria-label="anchor" href="#read-only-spatial-grid-data"></a>
</h4>
<p>In case you would like to download only the H3 spatial grid of cities
in the AOP project, you can use the <code><a href="../reference/read_grid.html">read_grid()</a></code>
function.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">h3_for</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_grid.html">read_grid</a></span><span class="op">(</span>city <span class="op">=</span> <span class="st">'Fortaleza'</span>, showProgress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">h3_for</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 6 features and 4 fields</span></span>
<span><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -38.50828 ymin: -3.889301 xmax: -38.4983 ymax: -3.878958</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt;            id_hex abbrev_muni name_muni code_muni</span></span>
<span><span class="co">#&gt; 1 89801040323ffff         for Fortaleza   2304400</span></span>
<span><span class="co">#&gt; 2 89801040327ffff         for Fortaleza   2304400</span></span>
<span><span class="co">#&gt; 3 8980104032bffff         for Fortaleza   2304400</span></span>
<span><span class="co">#&gt; 4 8980104032fffff         for Fortaleza   2304400</span></span>
<span><span class="co">#&gt; 5 89801040333ffff         for Fortaleza   2304400</span></span>
<span><span class="co">#&gt; 6 89801040337ffff         for Fortaleza   2304400</span></span>
<span><span class="co">#&gt;                             geom</span></span>
<span><span class="co">#&gt; 1 POLYGON ((-38.50232 -3.8858...</span></span>
<span><span class="co">#&gt; 2 POLYGON ((-38.50527 -3.8840...</span></span>
<span><span class="co">#&gt; 3 POLYGON ((-38.49932 -3.8841...</span></span>
<span><span class="co">#&gt; 4 POLYGON ((-38.50227 -3.8824...</span></span>
<span><span class="co">#&gt; 5 POLYGON ((-38.50237 -3.8893...</span></span>
<span><span class="co">#&gt; 6 POLYGON ((-38.50532 -3.8875...</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a>
</h4>
<p>In all of the functions above, note that:</p>
<ul>
<li>The <code>city</code> parameter can also be a 3-letter abbreviation
of the city.</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_access.html">read_access</a></span><span class="op">(</span></span>
<span>  city <span class="op">=</span> <span class="st">'cur'</span>, </span>
<span>  mode <span class="op">=</span> <span class="st">'public_transport'</span>, </span>
<span>  year <span class="op">=</span> <span class="fl">2019</span>,</span>
<span>  peak <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  showProgress <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_grid.html">read_grid</a></span><span class="op">(</span>city <span class="op">=</span> <span class="st">'for'</span>, showProgress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>You may also download the data for all cities of the project at once
using <code>city = 'all'</code>:</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_landuse.html">read_landuse</a></span><span class="op">(</span>city <span class="op">=</span> <span class="st">'all'</span>, year <span class="op">=</span> <span class="fl">2019</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="acknowledgement">Acknowledgement<a class="anchor" aria-label="anchor" href="#acknowledgement"></a>
</h2>
<p>The R package <strong>aopdata</strong> is developed by a team at the
Institute for Applied Economic Research (Ipea), Brazil.</p>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>If you use this package in your own work, please cite it as one of
the publications below:</p>
<p><strong>Population and land use data</strong></p>
<ul>
<li>Pereira, Rafael H. M. et al. (2022) Distribuição espacial de
características sociodemográficas e localização de empregos e serviços
públicos das vinte maiores cidades do Brasil. <em>Texto para Discussão
2772</em>. Ipea - Instituto de Pesquisa Econômica Aplicada. Available at
<a href="http://repositorio.ipea.gov.br/handle/11058/11225" class="external-link uri">http://repositorio.ipea.gov.br/handle/11058/11225</a>
</li>
</ul>
<p><strong>Accessibility data</strong></p>
<ul>
<li>Pereira, Rafael H. M. et al. (2022) Estimativas de acessibilidade a
empregos e serviços públicos via transporte ativo, público e privado nas
20 maiores cidades do Brasil em 2017, 2018, 2019. <em>Texto para
Discussão</em>. Ipea - Instituto de Pesquisa Econômica Aplicada.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rafael H. M. Pereira, Daniel Herszenhut, Marcus Saraiva, Carlos Kaue Vieira Braga, Ipea - Institute for Applied Economic Research.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
